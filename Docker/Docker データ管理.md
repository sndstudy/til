# Docker データ管理

- コンテナ内の読み書き可能なレイヤに管理は可能
  - コンテナが消されると一緒にデータが消される
  - ホストで管理するよりアクセス速度が遅い

## volumeを使用したデータ管理

- ホスト上のDockerエリア
  - Linuxだと`/var/lib/docker/volume`に作成される
  - ホスト上で直接操作すべきでない領域
- コンテナ
  - 実際はホスト上のディレクトリを見ている
- `docker volume create [ボリューム名]`
  - ホスト上にボリュームを作成
- `docker volume ls`
  - 存在するボリューム一覧
- `docker volume rm [ボリューム名]`
  - ボリューム削除
- `docker run -itd --name [コンテナ名] -v [ボリューム名]:[マウント先]:[オプション] [イメージ名]`
  - マウント
  - オプションには`ro`(読み取り専用)が設定できる
- ホスト間で共有することはできない

## bind mountを使用したデータ管理

- volumeとは異なるユーザが管理しているファイルやディレクトリ
  - 上記をマウントし、コンテナから見る
- データは事前に用意しておくイメージ
- `docker run -itd --name [コンテナ名] -v [マウント元のパス]:[マウント先]:[オプション] [イメージ名]`
  - マウント
  - オプションには`ro`(読み取り専用)が設定できる

## tmpfsを使用したデータ管理

- メモリ領域をディレクトリとしてマウントする
- コンテナが停止した時はデータが消えてしまう
- 永続的なデータではなく一時的なデータを保持する
- `docker run -itd --name [コンテナ名] --mount type=tmpfs,destination=[マウント先] [イメージ名]`
  - マウント
