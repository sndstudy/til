# JJUG CCC 2018 Spring

## Java10まとめと、どうなるJava11

- リリースモデル
    - 6ヶ月周期でリリースされる
        - フューチャーリリース
    - 3ヶ月周期
        - メンテナンスリリース
    - LTS(Long Term Support)
        - JDK11が最初のLTS
        - 3年毎
    - OracleJDKはOracleの顧客しか使用できない
        - 代わりにOpenJDKを使用する
- Java8について
    - サポート切れるのが2019年1月
        - 個人ユーザは2020年12月まで
- デスクトップ関連について
    - AppletとWebStartはJDK11ではサポートされない
    - JavaFXはJDK11にはバンドルされない
    - AWTとSwingはJDK11でもサポートされる
- JDK10について
    - 一番派手な変更はローカル変数の型推論(var)
        - varはキーワードではなく特別なクラスとして提供されている
        - jshell上でのvarが便利
    - API追加
        - List/Map/Set
            - Copyof()
- JDK11について
    - Single-File Source-Code Programs
        - .javaファイルが1つだけであればコンパイル不要で実行可能
    - Raw String Literals
        - バッククォート3つで囲むことで文字リテラルになる
    - ラムダ式でvarが使えるようになる
    - JDKからCORBA Modulesが無くなる
        - JDKのサイズが小さくなる
    - API追加
        - String
            - repeat
            - lines
            - isBlank
- JDKのサポートについて
    - AdoptJDK
        - Project by London JUG
        - IBMサポート
        - LTSは4年間
        - OpenJDKに貢献して、OenJDKにもLTSを提供していくかも？

```

//varの使い方の例
var a = new Object(){
    int twice(int x){
        return x * 2;
    }
}

```

## 請負Java開発でスクラムした成功事例 Excelでスクラム開発

- はじめに
    - 請負はアジャイルに適さない
        - 今回は作るものが半分くらい決まっている状態
- 背景
    - 環境
        - インターネットが繋がらない
        - 付箋を貼る場所がない
    - 開発概要
        - お客様の後ろにはエンドユーザがいる
        - 途中までできたら見せて欲しい
        - システム概要
            - 機器との通信
    - ウォーターフォールの限界
        - 連携先のIFの提示が遅い
        - 手戻りが発生したら影響がでかい
- スクラムの選択
    - なぜ仕様変更が辛いのか
        - 途中まで作ったものが覆されるから
    - ポリシーとして決まっているところから作っていった
        - NGワード
            - お試しで
            - とりあえず
            - 暫定
- どうやったのか
    - スローガン
        - 一緒に働き一緒に帰る
            - スクラムはフラットな組織
                - フラットにできるのは時間だけ。賃金も経験も等しくない
    - 見積もり
        - 懸念点
            - チームが決まっていない
            - ウォーターフォールになるかも
        - やったこと
            - 見積もりは基本的にウォーターフォールと同じ
            - リスクを多めに積む
                - 開発方法がぶれても許容できる
                - 決めて作ったものを修正できる
            - プランニングポーカーを使って見積もり
    - スケジュールの進め方
        - 1スプリント2週間
        - 外部設計〜結合試験で回す
        - 設計後お客様レビュー
        - 要求をストーリーに分割
            - 決まっていること、決まっていないことを分ける
            - ストーリーの依存関係を洗い出す
                - 事前に何が必要なのか判明する
    - 体制
        - PO,ScM,開発チームで7人
    - PBIとSBI
        - スクラムの成果物
        - 今回はExcelで作った
        - SBIでの進捗はEVMを採用
            - 作業に点数をつけて管理する方法
    - バーンアップチャートのメリット
        - 駆け上がる感じがする
        - 進捗が直感的にわかる
            - 傾きからスピード感がわかる
    - デイリースクラム
        - 夕方に実施
            - 昨日帰った時間、作業進捗を確認
    - スプリントレビュー
        - 設計・製造・試験完了の定義を確認
        - 代表的な試験結果をお客様に見せる
            - フィードバックをもらう
    - レトロスペクティブ
        - 15分で終わる
        - KPTでtryで出て来た1つを改善としてあげる
    - 幸福度チェック
        - 振り返り後に実施
        - このチームをどう思うか
            - 1~5点で評価 5が最強1は未成熟
- どうなったのか
    - 主なtry
        - 仕様の勉強会
        - SBIに設計コメントや障害時のコメントを記載
            - 1ファイル見れば把握できるようになった
    - その他
        - 一緒にランチをとる
            - コミュニケーションを活発にする
        - 設計、製造、試験の担当者を別の人にする
        - 1スプリントで製造した規模から想定される故障数、コメント数を計算
        - JUnitを使った単体テスト・結合テストの自動化
        - 幸福度チェックのポイントは徐々に上がっていった
- 今回の方法のデメリット
    - 最初がきつい
    - 納品とともにチームが解散
    - ウォータフォールと比べて...
        - 管理工数が上がる
        - アジャイルの指標がないため正しく進んでいることを示す作業が発生
- 今回の方法のメリット
    - 変更を避けられ手戻りが減る
        - 外部設計完了時に無理に仕様を決めない
    - チームの成熟度が上がりやすい
- 参考資料
    - スクラム現場ガイド
        - https://www.amazon.co.jp/%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E7%8F%BE%E5%A0%B4%E3%82%AC%E3%82%A4%E3%83%89-%E3%82%B9%E3%82%AF%E3%83%A9%E3%83%A0%E3%82%92%E5%A7%8B%E3%82%81%E3%81%A6%E3%81%BF%E3%81%9F%E3%81%91%E3%81%A9%E3%81%86%E3%81%BE%E3%81%8F%E3%81%84%E3%81%8B%E3%81%AA%E3%81%84%E6%99%82%E3%81%AB%E8%AA%AD%E3%82%80%E6%9C%AC-Mitch-Lacey/dp/4839951993

## Java から TypeScript へ 切り替えて加速するサーバーレス開発

- 背景
    - システム
        - コンシューマ向けのWebアプリケーション
        - EC2とDynamoDBの半サーバレス
    - 開発体制
        - DevOps
    - AWS Lambdaへの変更
        - Javaのランタイムが出て来たときに乗換
    - 機能追加
        - マイクロサービス型で機能追加
        - JavaチームなのでJavaで開発
        - 15近いシステムを追加
- 問題発生
    - タイムアウトが多発
    - 原因
        - VPC Lambdaでの遅延がある
        - コールドスタートの発生箇所が多い
            - サービスを分割しすぎた
            - コールドスタートを甘く見過ぎた
    - コールドスタート
        - コンテナが再利用されず、新規のコンテナが割り当てられた状態で起動すること
- TypeScript
    - メリット
        - 静的な型づけができる
            - Javaのノウハウが活かしやすい
        - JSの最新仕様が先行利用ができる
    - デメリット
        - JSの既存のライブラリに型定義がない場合が困る
        - JSとTSが混在できてしまうので混在すると厳しい
- JavaとTSの親和性
    - クラスの公開はexportの有無でメンバ変数やメソッドのアクセスレベルはJavaと同じ
    - 型を後に書く
    - Javaのmainメソッドに当たるものはないので任意メソッド名で良い。自分で実行する