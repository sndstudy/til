# Developers Summit 2020

## 最新のブラウザで変わるCookieの取扱いやプライバシーの考え方

- キーワード
  - Cookieについてのおさらい
  - 今3rd party cookieが非推奨になっている理由
  - ITP
  - Privacy Sandbox
- スライド
  - https://speakerdeck.com/yosuke_furukawa/zui-xin-falseburauzadebian-warucookiefalsequ-rixi-iyaprivacyfalsekao-efang
- セキュリティやプライバシー周りでブラウザの変更が多い
- safari
  - ITP
  - トラッキングを防止する仕組み
- firefox
  - ETP
  - ブラックリスト形式のリストがあり、マッチするとcookieが保存されない
- chrome
  - SameSiteCookie
  - UserAgent文字列を固定化
    - UAから個人を特定できるのでは? 解像度が高すぎて
  - 3rd party cookie
    - 廃止の方向
    - 異なるドメインのcookieは保存されなくなる
- cookieを用いたトラッキングの方法
  - ユーザに合った広告の出し方
- DNSのCNAMEレコードにドメインを追加してもらいドメインを1st party扱いにする方法がある
- トラッキングをしたい VS トラッキングを阻止したい
  - イタチごっこの状態
  - しかし、ただ単純に廃止したいわけではない
- UAが固定化されるとOSがWindowsになる(macでも)
  - Node.jsのインストールがWindowsになる
  - 1回のリクエストでは情報が取れなくなるのでサーバから情報を要求するような感じになる
    - 交渉しながらデータを取得するイメージ
- ブラウザ内で機械学習を行う
  - 個人情報のデータを送る必要がない(ブラウザ内で完結)

## CircleCIの3000 万件のワークフローから得られたDevOpsに関する知見

- 参考
  - https://services.google.com/fh/files/misc/state-of-devops-2019.pdf
- CircleCIがワークフローの分析結果を公開している
- CI/CDを使う動機
  - 自動化したい
  - コスト削減したい
  - 開発スピード
  - 品質……
- 優れたパフォーマンスを発揮しているチームはどのように使っているのか
- 対象データ
  - 月間3500万件以上のジョブ
  - 2019/6/1~8/30に確認された3000万強のワークフローデータ
  - 40000以上のorganization
  - 15万以上のプロジェクト
- ジョブ
  - DockerコンテナやVMなど実行環境が起動する単位
- ワークフロー
  - 複数のジョブを組み合わせて構築するCI/CDのパイプラインの全体
- メトリクス
  - スループット
    - デプロイ頻度(ワークフローが開始される頻度)
    - リードタイム(ワークフローの動作時間)
  - 安定性
    - 復旧時間(レッドビルドがグリーンビルドになるのに要する時間)
    - 失敗の頻度(ワークフローの失敗率)
- ワークフローの動作時間
  - 最遅
    - 3.3日
  - 中央値
    - 3分27秒
  - 最速
    - 2.1秒
  - プロジェクトに依存するため何分がベストか言い切れない
  - 最適なワークフローは数分から数十分程度
  - 開発者に適切なフィードバックを素早く行われること
    - 長さを短縮できるポイントを探すべき
- デプロイの頻度
  - 50%タイル
    - organizationレベル
      - 1日6回
    - プロジェクトレベル
      - 1日3回
    - デフォルトブランチレベル
      - 1日1回
  - 95%タイル
    - organizationレベル
      - 1日250回
    - プロジェクトレベル
      - 1日74回
    - デフォルトブランチレベル
      - 1日39回
  - 1日に10回以上のデプロイを行なっているプロジェクトは多くない
  - 非常に優れたチームは1日に数回のデプロイ
  - デプロイ回数が多い ≠ 優れたチーム
  - 組織がコードをテスト及び統合する頻度とエラーが発生した時の検知するスピードが重要
  - フィーチャーフラグでデプロイとリリースを切り離すことが可能
    - https://circleci.com/ja/resources/velocity-report/
- 復旧時間
  - 最遅
    - 30日
  - 中央値
    - 17.5時間
    - 一日の終わりにエラーを検知して次の日に修正することが多い
  - 最速
    - 1秒未満
  - デフォルトブランチ
    - 中央値
      - 1時間以内
  - 30%のプロジェクトでは90日間で一度も失敗していない
- 失敗の頻度
  - 27%はワークフローが失敗している
    - トピックブランチは31%
    - デフォルトブランチは18%
  - 50%はCI/CDパイプラインを変更しても一度も失敗していないプロジェクトの割合
    - 設定ファイルを使い回すか設定ファイルのパッケージング機能であるOrbsを使っているため
  - 多くはトピックブランチの失敗に起因している
    - GitFlowなどのプラクティスが有効に働いている
- エリート
  - 2019 State of DevOps report から
  - ワークフローの開始頻度
    - 1日に複数回デプロイ
  - ワークフローの期間
    - 1日未満
  - 復旧時間
    - 1時間未満
  - ワークフローの失敗率
    - 0~15%
- 言語特有の差異
  - PHPは失敗率が少ない

## noteの決して止まらないカイゼンを支える、エンジニアリングへの挑戦

- スライド
  - https://www.slideshare.net/KonYuichi/note-227802322/KonYuichi/note-227802322
- noteのグロースモデル
  - 単一のKPIを追わない
    - 売り上げの場合
      - クリエーター登録を過剰に促す
      - 有料記事が過剰にレコメンドされる など
- noteのチーム
  - グロースモデルを支えるチーム
  - 開発チームを分ける
    - 基盤
    - 機能開発
    - 改善
  - 基盤
    - グロースモデル全体を活性化して加速
    - push通知の基盤づくりなど
    - リリース頻度少ない
    - データ基盤
    - スパム対策
    - 課金基盤
  - 機能開発
    - 主要な機能を実装
    - リファクタリングなど
    - 各ラインを太くしていいく
    - リリース頻度は中くらい
    - エディタの開発
    - 漫画ビューアの開発
    - Nuxt.js移行
    - タイムライン改修
  - カイゼン
    - 線が途切れていないかチェックしたりする
    - アジリティが重視される
    - PDCAを回していく
    - リリース頻度は多い
    - 年間100以上の施策をリリース
  - バランス大事
    - チーム構成でバランスをとった
    - 後回しになりがちな施策も取りかかれるように
- noteのデータ
  - どこが穴抜けなのかチェックする必要が出てきた
    - データ活用して施策を設定
    - もう少し指標が細かくなったグロースモデルになった
  - データ収集のための分析基盤の構築
    - 読者から反応あるのが嬉しい
      - Likeボタンを設置
  - グロースモデルとデータで施策意思決定精度を上げる
- 何をやっていくのか
  - レコメンドの向上
  - パフォーマンス課題の向上

## 質とスピード

- スライド
  - https://speakerdeck.com/twada/quality-and-speed-2020-spring-edition
- 荒ぶる四天王
  - 時間
  - 予算品質
  - スコープ
- 品質は犠牲にされがち
  - 短期的なスピードは得られる
  - 長期的には致命傷
- 品質とは誰かにとっての価値
- ilities
- 狩野モデル
- 見える品質と見えない品質
  - 外部品質内部品質
  - 内部品質は結果ではなく原因
- 品質を犠牲=保守性
  - テスト容易性
  - 理解容易性
  - 変更容易性
- 果たして保守性を犠牲にしてスピードは上がるのか？
- 爆弾処理のようなリリース
- 保守性の低さがもたらすもの
  - 一つ一つの変更に余計な時間がかかる
  - 短期的には得られる
  - 中期的には逆効果
  - 長期的には致命傷
- スピードを落とせば保守性は上がる？
  - 時間をかけたとしてもその人の技術力以上のコードはかけない
  - 与えられた時間によって柔軟に汚さと速さを選択する器用なことはできない
- 保守性とスピードはトレードオフではない
  - コードの品質を高く保っていたからスピードが速い
- 4つのメトリクス
  - リードタイム
  - デプロイ頻度
  - 変更失敗率
  - MTTR
- 従来のメトリクス
  - 時間あたりのコード量
  - バグ数 とか
- 本当の関係
  - 内部品質がスピードをうみ
  - スピードが学びのループを生み
- どうやって個人の質を上げるのか
  - 自分で設計したシステムを長い間メンテすること
- テスト自動化の損益分岐点は4回
  - 手動テストと自動化されたテストのコストが逆転する
- 内部品質への投資の損益分岐点は一ヶ月以内に現れる
- 荒ぶる四天王はスコープを削る
  - リリースを取るかスコープを取るか

## Best Practices In Implementing Container Image Promotion Pipelines -知っておくべきコンテナイメージ・プロモーションの方法

- スライドのサイト
  - https://jfrog.com/shownotes/
  - https://noti.st/jbaruch/CNPyzR
- コンテナ = ほぼDocker
- Dockerは気に入っているがよく知っているわけではない
- docker build
  - Dockerfileに手順が記載されている
- 何もタグをつけないとlatestになる
  - 異なるイメージが作成される場合がある
  - バージョンをつければ少しはよくなる
    - イミュータブルの点ではよくない
    - パッチが当てられることがあるためバージョンが同じでも全く同じになるわけではない
    - チェックサムをつけるのはどうか?
      - でもそれって本当に求めているバージョンってわかる?
  - いつ振る舞いが変わるかわからない
  - promoteする
- 鉄板のpipelineを作ろう
  - LABELをつけておく
  - DockerRepositories
    - 環境毎にレジストリを分ける
- リポジトリ
  - トップレベルのディレクトリ
- レジストリ
  - それ以外のディレクトリ
- jfrogはイメージリポジトリを提供してくれる?
- Dockerで環境構築デプロイするとき
  - buildは一回だけ
  - 環境は分ける
  - ビルドしたものをプロモートする
  - 自分の依存関係は自分で管理する

## 礼節から育てるチームの健康と信頼性

- グループとチームの違い
  - 共通の目的がある
  - 協力して行動する
  - 相互に依存している
- なぜチームで働くのか
  - 一人でできることは限られているから
- プロセス知識スペクトル
  - ルーチンの作業
    - やり方はわかっている
    - 不確実性が少ない
      - 継続的なカイゼン
  - 複雑な業務
    - やり方がわかっていない
    - 不確実性が多い
      - 専門性を結集した問題解決
  - イノベーションの業務
    - どうやってゴールに到達するかわからない
    - 仮説検証による学習ループ
- 成果を出すチームの行動
  - 一人の学びをチームの学びに
  - 建設的な衝突が不可欠
- チームの健康と信頼性
  - 信頼性の高いチーム
    - 成果を出すための行動を自律的に継続できる
  - 健康なチーム
    - 建設的な衝突を人間関係のリスクなしに行える
- 建設的な衝突に必要なものは何か
  - 心理的安全性
    - カジュアルにやばいことを言える雰囲気
    - 対人関係にリスクがない状態
    - 不確実なこと不安なこと
    - あくまで建設的なこと(なんでも言って良いわけではない
- 心理的安全性についてよくある誤解
  - 仲良し = 心理的安全?
    - 飲みニケーション
    - 忖度
  - 正しければ何を言ってもいい
    - モヒカンの手斧
    - コードレビューは人格否定ではない
  - 目指すのはラーニングゾーン
- 礼節
  - HRTの原則
  - H
    - 謙虚
  - R
    - 尊敬
  - T
    - 信頼
  - 無礼とは
    - 攻撃的な言動
    - 自分が上であると誇示
    - チーム/仕事に無関心
  - なぜ有害なのか
    - 同僚の健康を害する
    - 会社に損害をもたらす
    - 周りの思考能力を下げる
    - 周りの認知能力を下げる
    - 周りを攻撃的にする
  - チームで働く上での礼節
    - 礼節はチームの一員としての責任
      - 周りのパフォーマンスを下げない
      - 自分の機嫌をメンテナンス
      - チームに関心を持つのも仕事
    - 礼節はプロトコル
      - コミュニケーションの約束
    - やばいことこそ礼儀正しく
      - 正しいことはそれだけで強い

## 少量データで軽量な機械学習の手法について

- キーワード
  - リザーバコンピューティング
- データの質と量
  - PoCを阻むデータと質と量の問題
  - 本当に必要なデータはあるのか
- ビックデータや既存のコンピューティングでは踏み込めない領域がある
- ユースケース(キャリブレーションに注目)
  - 個人に特化した目覚まし
    - 本人の体調
  - 個人に特化した歯磨きアドバイザ
    - 磨き位置
    - 磨いた回数
    - 歯の本数
    - 歯の形状
  - 状況にあわせてトンネル内で正確な位置特定(加速度センサで推論)
    - 走行距離
    - 左右のハンドリング
    - 運転の癖
    - タイヤの空気圧
    - 車体の状況
  - アポ先での受付コンシェルジュ(声から訪問客の情報を照合)
  - 自動議事録システム 会議支援システム
    - 音声から話者と内容を推論
    - 誰が何の話をしたのか議事録
    - 今の話題
    - 参加メンバーの事前データは取れない
  - 製造現場での異常検知
    - 製造ラインでの異常検知がしたい
    - データはまだとっていない
    - 異常データはそんなにない
    - 環境変化が激しすぎる
  - スマートウォッチによるパーソナルトレーナー
    - スマートウォッチの加速度センサで自動ロギング
    - 筋トレや泳法を判定したい
    - 回数も自動判定したい
    - トレーニングメニューをどんどん追加したい
  - キャリブレーションが必要な領域
    - 個人合わせる
      - ヘルスケア機器
      - 会議議事録


---


## レガシーコードからの脱却

## 新しいHTML<portal>を利用した画面遷移設計 〜PayPayモールとYahoo!ニュースの事例を添えて〜

## 全アプリ開発者に伝えたい、レガシーコードから脱却するための具体的な手法、“ルール駆動開発”

## 問題から目を背けず取り組んでいく ･･･ 一休のこれまで（仮）

## マルチクラウドに向けてNGINX活用促進する為に知っておいてほしいこと

## オープンソースのこれまでとこれから

## Hackが好きなエンジニアが組織をHackしてみる考えと実践を経てきたヒストリー

## 雲の中心で愛を叫ぶ！ クラウド横断パネルディスカッション