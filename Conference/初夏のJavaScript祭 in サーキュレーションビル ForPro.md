# 初夏のJavaScript祭 in サーキュレーションビル ForPro

- イベントページ
    - https://javascript-fes.doorkeeper.jp/events/73314

## 14:50 Firebaseを利用したフロントエンド開発

- Googleのクラウドサービス
- メリット
    - コストカット
    - 開発スピードアップ
        - フロントエンジニアだけで完結できるかも
### 実例1

- 同時3万アクセスをさばくことができるシステム
        - テレビ番組の投票システム
- 実際にしたこと
    - 投票数はリアルタイムDBで管理
    - 複数投票を防ぐために匿名ログイン機能を使用した
        - トークンを発行してローカルストレージで保存
- 結果
    - 同時1万アクセスだったけどサーバーダウンなし
    - AWSより安かった
    - Firebaseの構築は1日で完了
        - どちらかというと画面実装に時間がかかった
- 遭遇したトラブル
    - safariのプライバシーモードだとローカルストレージにデータ保存されない

### 実例2

- Twitterのタイムラインで特定のキーワードを何回つぶやいてるかを見て動画をオススメしたい
    - Firebaseを使えばフロントサイドだけで完結できるかも?
- Firebase Twitterログイン
    - CORS問題が発生。TwitterAPIはブラウザからアクセスできない。
        - Firebase Functionsで解決
- Firebase Functionsとは
    - 簡易的なAPIを作れるサービス
        - AWSでいうところのAPI GateWay + Lambdaみたいなもの?
### まとめ

- Firebaseを使用すれば簡易的なキャンペーンサイトであればフロントサイドの技術で完結できる
- Googleに負荷対策はお任せ
- ローカル開発環境が提供されている

## 15:10 PWAで何ができるようになるのか

- スライド
    - https://speakerdeck.com/tipo159/what-does-pwa-do

- Googleが提唱しているNativeAppに近いWebAppの概念
    - W3Cで標準化はされていない

### PWAの定義

- 信頼性がある
    - すぐにロードされていてどんなネットワーク条件でも恐竜の図が表示されない
- 速い
    - アニメーションやスクロールが速い

### PWAの特徴

- オフライン動作可能
- インストール不要
- ホームスクリーンの追加方法はアイコン
    - ブックマークではない
- タスクリスト上での表示は個別App
- UIはHTML,CSSで開発
- ロジックはJS

### PWAが出てきた背景

- 一般の人はネイティブアプリをあまりインストールしないという調査結果がある
- 新興国ではモバイルネットワークが整備されていない
    - WebApp実行中にネットワーク切断
    - ネイティブアプリをSDカード経由でしかインストールできない

### PWAのチェックリスト

- Googleが提唱しているチェックリスト
    - Lighthouse(Chromeのツール)で11種類のチェックリスト項目をチェックすることが可能

### PWAのベースライン

- HTTPS
- レスポンシブデザイン
- オフラインでもロード可能
- ホームスクリーンに追加するためのメタデータ提供
- 3G回線でも最初のロードが速い
- クロスブラウザで動作
- ページ遷移が遅い回線によってブロックされない
    - コンテツがない枠組みだけのページに遷移させる方が良い
- 全てのページにURLがある

### Service Worker

- ブラウザがバックグラウンドで実行するスプリクト
- 作成方法
    - ビューライブラリのフレームワーク使用
    - GoogleのWorkboxを使用
        - プッシュ通知はサポートされていない

### HNPWA

- PWAで作成したHacker Newsリーダーの実装例を集積するサイト
    - https://hnpwa.com/

## 15:30 JSerと暗号通貨(仮)

- botは楽しい
    - 初心者がやるにはちょうど良い題材
    - 反応が返ってくるから楽しい
    - Hubotなど
- そこでtrade bot
    - データ研究やトレードで実利を得られる
    - 相場や他のデータを取得して売買する
- 暗号技術
    - 共通鍵暗号
    - 公開鍵暗号
    - 暗号化ハッシュ関数
- オススメの本
    - 暗号技術入門 秘密の国のアリス
- Node.js CryptoAPI
    - 暗号化の実装が可能
    - webassemblyを使うのも一つの手かも
- ブロックチェーンのデータ構造
    - データ本体(ブロブ)
    - ブロブのハッシュ値(ポインタ)
        - Gitに似ている

## 15:50 JavaScript ( 時々 TypeScript ) でゆるやかにはじめる関数型プログラミング ( 仮 )

- スライド
    - https://speakerdeck.com/wakamsha/javascript-shi-typescript-de-yuruyakanihazimeruguan-shu-xing-puroguramingu

- JSには関数型プログラミングのエッセンスが多分に含まれている

### 関数型プログラミングって?

- 複数の式を関数の適用によって組み合わせる
    - 関数合成
- 副作用のない関数
    - 純粋
- 対義語は手続き型プログラミング
    - 変数を破壊的に書き換える、副作用を駆使する など

### 関数合成

- 高階関数
    - 関数を引数or戻り値として扱うものを高階関数という
- まとめ
    - 関数をひとまとまりにせず細かく分解する
    - 小さな関数をくみ合わせて大きな機能を実現する
    - ユニットテストを描くのが容易になる
    - 汎用性が高くなる

### 純粋な関数(JSにおける)

- 戻り値は必ず引数として与えられた値からのみ計算される
- 関数の外部で変更される可能性のあるデータに一切依存しない
- 関数実行部の関数実行部の外側に存在する何かしらの状態を一切変更しない

### 副作用はない方が望ましい

- 状態に関した依存関係が生まれてしまう
    - 状態とはグローバル変数やインスタンスなど
- 依存関係とは関数の呼び出し順序など
    - 再現性に制約が発生する

### 副作用をなくすための第一歩

- グローバル変数も引数に渡してしまえば良い

### 参照透過性

- 関数の戻り値自体を差し替えてもプログラム全体が壊れないこと

### 関数型プログラムのメリット

- 保守性・拡張性が高い
- GUIアプリケーションと相性が良い

### 関数型プログラムのデメリット

- 富豪プログラムになりがち

### 学び方のオススメ

- パーサーを作ってみる
    - JSONなど
- Haskellを学んでみる
    - 純粋関数型プログラミング言語

- 登壇者のテックブログ
    - https://tech.recruit-mp.co.jp/

## 16:10 Dexie.jsで初めるIndexedDB

- IndexedDBとは
    - Webブラウザ内で動くオブジェクト型ストレージ
    - クライアントサイドでの永続化の一つ
    - トランザクション
    - 利用用途はオフライン対応など

### 辛い話

- ローカルストレージに比べてデータ取得までの手順が多い
- クライアントサイドは過去のDB構造で実行するがコードは新しいマイグレーションされたカラムを参照しようとすると動かなくなる

### Dexie.js

- IndexedDBのラッパーライブラリ
- O/Rマッパーで操作している感覚
- Promiseで使えるインタフェースが提供されている

- 解決しないこと
    - IndexedDBのローレベル由来の煩雑さ

### まとめ

- IndexedDBはIE Edgeでは一部機能が使えない
- Dexie.jsを使えばIndexedDBを生で使用する苦労をある程度回避することができる

## 16:30 改めて理解するJavaScript Array

- 6月16日  ng-japan
    - https://ngjapan.org/
- スライド
    - https://speakerdeck.com/armorik83/understanding-javascript-array

- 配列の値を操作する場合
    - mapで値を操作する
        - Arrayのメソッド
    - ライブラリ不要
- もしかするとライブラリ不要かも
    - jQuery
    - lodash
    - Underscore.js
        - なんとなくで使っていない?
- ES5は配列操作が豊富
    - 2018年時点では全ブラウザ対応
- なるべくライブラリは使わない方がいいかも
    - 依存先は少なければ少ない方が良い
    - 依存が多いほどそれぞれのライブラリを更新する手間が発生
    - メンテナンス期間は標準化されているものの方が長い
    - パフォーマンスの観点
        - 標準はネイティブコードで動作
        - ライブラリはJSで書かれ、ランタイムで動作
        - ライブラリを使わないことでCDNの時間短縮やWebpack等のバンドル結果の容量が少なくなる
- どうしても使いたいのなら
    - `npm i --save lodash`ではなく`npm i --save lodash.isequal`と欲しいものだけ取得するようにする
- コードとは意図を伝えるもの
    - 動けばいいやではNG
    - 動かすことより伝えることが重要
    - 適切なメソッド選択をする

## 16:50 実践ES Modules

- スライド
    - https://speakerdeck.com/likr/shi-jian-es-modules
- ESModule
    - JS標準のモジュールシステム
    - Node.jsはCommonJSでモジュールを表現している
- ブラウザネイティブのモジュール
    - `type="module"`のscript要素

## 17:10 Bootstrap4 Source code版の利用方法 

- Sourceファイル版
    - SCSS編集や自社用にカスタマイズするときに使用する
    - ビルドする必要あり
- ESlint
    - JSのコードチェックツール
        - エラーの潜在的パターンを警告に表示される

## 17:30 女性専用SNS tipsysから考えるプライベートプロダクトとJavaScriptの可能性

- Ionicで開発
- Web Beta盤でリリースできるのは良い
    - ユーザはインストールなしでフィードバックをくれる
- アプリインストールするまでの速度は意外と長い
- サーバーに優しい
    - サーバレンダリングはお金での解決を求めてくる
- ネイティブは課金ハードルが低い
    - PaymentAPIに期待
- LazyLoad/pre-load
    - ページ遷移0秒が実現可能に
- 昔はSPAはSEOに悪影響
    - 現在GoogleはJSを認識してくれる
- html app conference
    - 7/8日に開催予定

## 17:50 IoTのいろんなパートをJavaScriptでやってみた話

- mJS
    - 色々制限がある
- MongooseOS
    - ブラウザ上でwifi設定やAWS設定が可能
